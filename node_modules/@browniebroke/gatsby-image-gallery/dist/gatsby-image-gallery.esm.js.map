{"version":3,"file":"gatsby-image-gallery.esm.js","sources":["../src/row.tsx","../src/column.tsx","../src/img-wrapper.tsx","../src/index.tsx"],"sourcesContent":["import styled from 'styled-components'\n\nconst Row = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin-right: -15px;\n  margin-left: -15px;\n`\nexport default Row\n","import styled, { css } from 'styled-components'\n\ninterface ColProps {\n  md: number\n  width: number\n}\n\nconst Col = styled.div<ColProps>`\n  flex-grow: 0;\n  flex-shrink: 0;\n  ${(props) => {\n    return css`\n      flex-basis: ${props.width}%;\n      max-width: ${props.width}%;\n    `\n  }}\n\n  @media (min-width: 576px) {\n    ${(props) => {\n      return css`\n        flex-basis: ${props.md}%;\n        max-width: ${props.md}%;\n      `\n    }}\n  }\n`\n\nexport default Col\n","import styled from 'styled-components'\n\ninterface ImgWrapper {\n  margin: string\n}\n\nconst ImgWrapper = styled.div<ImgWrapper>`\n  margin: ${(props) => props.margin};\n`\n\nexport default ImgWrapper\n","import React, { FC, useState } from 'react'\nimport { GatsbyImage, getImage, IGatsbyImageData } from 'gatsby-plugin-image'\nimport Lightbox from 'react-image-lightbox'\n\nimport Row from './row'\nimport Col from './column'\nimport ImgWrapper from './img-wrapper'\nimport styled from 'styled-components'\n\nimport LightboxCSS from 'react-image-lightbox/style.css'\n\ninterface ImageProp {\n  full: IGatsbyImageData\n  thumb: IGatsbyImageData\n  thumbAlt?: string\n  title?: string\n  caption?: string\n}\n\ninterface GalleryProps {\n  images: ImageProp[]\n  colWidth?: number\n  mdColWidth?: number\n  gutter?: string\n  imgClass?: string\n  lightboxOptions?: object\n  onClose?: () => void\n}\n\nconst StyledLightbox = styled(Lightbox)`\n  ${LightboxCSS}\n`\n\nconst Gallery: FC<GalleryProps> = ({\n  images = [],\n  colWidth = 100 / 3,\n  mdColWidth = 100 / 4,\n  gutter = '0.25rem',\n  imgClass = '',\n  lightboxOptions = {},\n  onClose = () => {},\n}) => {\n  const [index, setIndex] = useState(0)\n  const [isOpen, setIsOpen] = useState(false)\n\n  const prevIndex = (index + images.length - 1) % images.length\n  const nextIndex = (index + images.length + 1) % images.length\n\n  // URLs for full width images\n  const mainSrc = images[index]?.full?.images?.fallback?.src\n  const nextSrc = images[nextIndex]?.full?.images?.fallback?.src\n  const prevSrc = images[prevIndex]?.full?.images?.fallback?.src\n\n  const onCloseLightbox = () => {\n    onClose()\n    setIsOpen(false)\n  }\n\n  return (\n    <React.Fragment>\n      <Row>\n        {images.map((img, imgIndex) => {\n          const thumbImage = getImage(img.thumb)\n          if (!thumbImage) {\n            return null\n          }\n          return (\n            <Col\n              width={colWidth}\n              md={mdColWidth}\n              key={imgIndex}\n              onClick={() => {\n                setIsOpen(true)\n                setIndex(imgIndex)\n              }}\n            >\n              <ImgWrapper margin={gutter}>\n                <GatsbyImage\n                  image={thumbImage}\n                  className={imgClass}\n                  alt={img.thumbAlt || ''}\n                />\n              </ImgWrapper>\n            </Col>\n          )\n        })}\n      </Row>\n      {isOpen && (\n        <StyledLightbox\n          mainSrc={mainSrc || ''}\n          nextSrc={nextSrc || ''}\n          prevSrc={prevSrc || ''}\n          onCloseRequest={onCloseLightbox}\n          onMovePrevRequest={() => setIndex(prevIndex)}\n          onMoveNextRequest={() => setIndex(nextIndex)}\n          imageTitle={images[index].title}\n          imageCaption={images[index].caption}\n          {...lightboxOptions}\n        />\n      )}\n    </React.Fragment>\n  )\n}\n\nexport default Gallery\n"],"names":["Row","styled","div","Col","props","css","width","md","ImgWrapper","margin","StyledLightbox","Lightbox","LightboxCSS","Gallery","images","colWidth","mdColWidth","gutter","imgClass","lightboxOptions","onClose","useState","index","setIndex","isOpen","setIsOpen","prevIndex","length","nextIndex","mainSrc","full","fallback","src","nextSrc","prevSrc","onCloseLightbox","React","Fragment","map","img","imgIndex","thumbImage","getImage","thumb","key","onClick","GatsbyImage","image","className","alt","thumbAlt","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imageTitle","title","imageCaption","caption"],"mappings":"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"}